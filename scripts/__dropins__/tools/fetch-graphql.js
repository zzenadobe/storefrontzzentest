/*! Copyright 2025 Adobe
All Rights Reserved. */
var H=Object.defineProperty;var g=(h,t,e)=>t in h?H(h,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):h[t]=e;var s=(h,t,e)=>g(h,typeof t!="symbol"?t+"":t,e);const _={"Content-Type":"application/json",Accept:"application/json"};class n{constructor(){s(this,"_endpoint");s(this,"_fetchGraphQlHeaders",{})}get endpoint(){return this._endpoint}get fetchGraphQlHeaders(){return this._fetchGraphQlHeaders}setEndpoint(t){this._endpoint=t}setFetchGraphQlHeader(t,e){this._fetchGraphQlHeaders={...this.fetchGraphQlHeaders,[t]:e}}removeFetchGraphQlHeader(t){delete this._fetchGraphQlHeaders[t]}setFetchGraphQlHeaders(t){typeof t=="function"?this._fetchGraphQlHeaders={...this._fetchGraphQlHeaders,...t(this._fetchGraphQlHeaders)}:this._fetchGraphQlHeaders={...t}}async fetchGraphQl(t,e){const d=this.endpoint,l=this.fetchGraphQlHeaders;if(!d)throw Error('Missing "url"');const r=(e==null?void 0:e.method)??"POST",p=e==null?void 0:e.cache,f=e==null?void 0:e.signal;let i;const a=new URL(d),G={..._,...l};return r==="POST"&&(i=JSON.stringify({query:t,variables:e==null?void 0:e.variables})),r==="GET"&&(a.searchParams.append("query",F(t)),e!=null&&e.variables&&a.searchParams.append("variables",JSON.stringify(e.variables))),await fetch(a,{method:r,headers:G,body:i,cache:p,signal:f}).then(Q=>Q.json())}getConfig(){return{endpoint:this.endpoint,fetchGraphQlHeaders:this.fetchGraphQlHeaders}}getMethods(){return{setEndpoint:this.setEndpoint.bind(this),setFetchGraphQlHeader:this.setFetchGraphQlHeader.bind(this),removeFetchGraphQlHeader:this.removeFetchGraphQlHeader.bind(this),setFetchGraphQlHeaders:this.setFetchGraphQlHeaders.bind(this),fetchGraphQl:this.fetchGraphQl.bind(this),getConfig:this.getConfig.bind(this)}}}const c=new n;class m extends n{get endpoint(){return this._endpoint??c.endpoint}get fetchGraphQlHeaders(){return this._endpoint?this._fetchGraphQlHeaders:{...this._fetchGraphQlHeaders,...c.fetchGraphQlHeaders}}}function F(h){return h=h.replace(/#.*/g,""),h=h.replace(/\s+/g," "),h.trim()}const{setEndpoint:u,setFetchGraphQlHeaders:v,setFetchGraphQlHeader:E,removeFetchGraphQlHeader:C,fetchGraphQl:w,getConfig:M}=c.getMethods();export{m as FetchGraphQL,w as fetchGraphQl,M as getConfig,C as removeFetchGraphQlHeader,u as setEndpoint,E as setFetchGraphQlHeader,v as setFetchGraphQlHeaders};
