/*! Copyright 2025 Adobe
All Rights Reserved. */
import{d as v,S as E}from"./chunks/deviceUtils.js";import{R as Z,V as x,c as ee,a as re,g as te,b as ne,i as oe}from"./chunks/deviceUtils.js";import{C as ie,I as le,i as de}from"./chunks/initializer.js";import{x as R,A as O,h as _,T as $,E as D,q as f,_ as B,y as M}from"./chunks/icons/Add.js";import{IntlContext as F}from"./i18n.js";import{g as ue,s as ce}from"./chunks/image-params-keymap.js";import"./preact-jsx-runtime.js";import"./signals.js";const A=r=>{const n=new FormData(r);return Object.fromEntries(n)},U=r=>{const n=new FormData(r),i=Object.fromEntries(n);return Object.entries(i).reduce((o,[a])=>{const u=r.elements[a];return u!=null&&u.validationMessage?{...o,[a]:u.validationMessage}:{...o}},{})},q={arrayMerge:(r,n,i)=>{const d=r.slice();return n.forEach((o,a)=>{typeof d[a]>"u"?d[a]=i.cloneUnlessOtherwiseSpecified(o,i):i.isMergeableObject(o)?d[a]=v(r[a],o,i):r.indexOf(o)===-1&&d.push(o)}),d}};function W(r,n){return n?v(r,n,q):r}const G=r=>r.replace("_","-");function z(r,n={},i,d,o,a="div"){const u=R(E),S=O(null),c=O("pending"),m=O([]),[y,P]=_({children:[d]}),[N,L]=_({}),b=$(()=>({get:t=>N[t],set:(t,e)=>{L({...b,[t]:e})}}),[N]),{intl:V}=R(F);n.dictionary=V.dictionary,n._setProps=t=>{P(e=>{const s=typeof t=="function"?t(e):t;if(o){const l=D(o(e),{key:"render"}),h=e.children.findIndex(p=>(p==null?void 0:p.key)==="render");e.children[h]=l}return s})};const g=f(t=>{typeof t=="function"?m.current.push(t):console.warn("Skipped: Invalid _registerMethod",t)},[]);n._registerMethod=g;const w=f(t=>B(a,{"data-slot-html-element":t.tagName.toLowerCase(),ref:e=>{e==null||e.appendChild(t)}},null),[a]);n._htmlElementToVNode=w,n.getSlotElement=f(t=>{var s,l;const e=(s=S.current)==null?void 0:s.querySelector(`[data-slot-key="${t}"]`);if(I(`ðŸŸ¦ "${r}" Slot getSlotElement: ${t}`,(l=S.current)==null?void 0:l.cloneNode(!0),e==null?void 0:e.cloneNode(!0)),!!e)return{appendChild:h=>{e.appendChild(h)},prependChild:h=>{e.insertBefore(h,e.firstChild)},appendSibling:h=>{const p=e.parentNode;p==null||p.insertBefore(h,e.nextSibling)},prependSibling:h=>{const p=e.parentNode;p==null||p.insertBefore(h,e)}}},[r]),n.onRender=f(t=>{m.current.push(t)},[]),n.onChange=n.onRender,n.replaceWith=f(t=>{g(e=>{const s=w(t);e._setProps({children:[s]})})},[w,g]),n.appendChild=f(t=>{g(e=>{const s=w(t);e._setProps(l=>({...l,children:[...l.children,s]}))})},[w,g]),n.prependChild=f(t=>{g(e=>{const s=w(t);e._setProps(l=>({...l,children:[s,...l.children]}))})},[w,g]),n.appendSibling=f(t=>{g(()=>{var s,l;const e=(s=S.current)==null?void 0:s.parentNode;e==null||e.insertBefore(t,((l=S.current)==null?void 0:l.nextSibling)??null)})},[g]),n.prependSibling=f(t=>{g(()=>{var s;const e=(s=S.current)==null?void 0:s.parentNode;e==null||e.insertBefore(t,S.current)})},[g]);const C=f(async()=>{if(c.current==="loading")return;c.current="loading",I(`ðŸŸ¨ "${r}" Slot Rendered`);const t=o?D(o(y),{key:"render"}):null;P({children:[t??d]}),m.current.forEach(e=>{e(n,b)}),c.current="ready"},[d,n,r,y,o,b]),j=f(async()=>{if(i)try{c.current="loading",I(`ðŸŸ© "${r}" Slot Initialized`),await i(n,S.current)}catch(t){console.error(`Error in "${i.name}" Slot callback`,t)}finally{c.current="ready",await C()}},[i,n,C,r]);return M(()=>{j().finally(()=>{u&&(u.value.delete(r),u.value=new Set(u.value))})},[]),M(()=>{C()},[JSON.stringify(n),JSON.stringify(N)]),[S,y]}function H({name:r,context:n,slot:i,children:d,render:o,slotTag:a="div",contentTag:u="div",...S}){const c=R(E),[m,y]=z(r,n,i,d,o,u);return $(()=>{if(!r)return console.warn('Slot "name" is required');c&&(c.value.add(r),c.value=new Set(c.value))},[r,c]),B(a,{...S,ref:m,"data-slot":r},y.children)}window.DROPINS=window.DROPINS||{};window.DROPINS.showSlots=async r=>{window.sessionStorage.setItem("dropin-debugger--show-slots",r.toString()),document.body.classList.toggle("dropin-debugger--show-slots",r)};let I=()=>{};window.DROPINS.logSlots=async r=>{window.sessionStorage.setItem("dropin-debugger--log-slots",r.toString()),I=r?(...n)=>console.log(...n):()=>{}};window.DROPINS.showSlots(window.sessionStorage.getItem("dropin-debugger--show-slots")==="true");window.DROPINS.logSlots(window.sessionStorage.getItem("dropin-debugger--log-slots")==="true");export{ie as Config,le as Initializer,Z as Render,H as Slot,E as SlotQueueContext,x as VComponent,ee as classes,re as debounce,v as deepmerge,te as generateSrcset,U as getFormErrors,A as getFormValues,ue as getImageParamsKeyMap,de as initializers,ne as isIOSMobileDevice,oe as isNumber,W as merge,ce as setImageParamsKeyMap,G as toLanguageTag,z as useSlot};
