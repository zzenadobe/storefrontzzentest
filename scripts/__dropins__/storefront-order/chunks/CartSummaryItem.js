/*! Copyright 2025 Adobe
All Rights Reserved. */
import{jsx as i,jsxs as b,Fragment as u}from"@dropins/tools/preact-jsx-runtime.js";import{Price as B,Image as K,CartItem as Q,Icon as R,Incrementer as G}from"@dropins/tools/components.js";import{useCallback as H}from"@dropins/tools/preact-hooks.js";import{Slot as M,classes as Z}from"@dropins/tools/lib.js";import{O as J}from"./OrderLoaders.js";import*as S from"@dropins/tools/preact-compat.js";const U=l=>S.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...l},S.createElement("path",{vectorEffect:"non-scaling-stroke",d:"M0.75 12C0.75 5.78421 5.78421 0.75 12 0.75C18.2158 0.75 23.25 5.78421 23.25 12C23.25 18.2158 18.2158 23.25 12 23.25C5.78421 23.25 0.75 18.2158 0.75 12Z",stroke:"currentColor"}),S.createElement("path",{vectorEffect:"non-scaling-stroke",d:"M11.75 5.88423V4.75H12.25V5.88423L12.0485 13.0713H11.9515L11.75 5.88423ZM11.7994 18.25V16.9868H12.2253V18.25H11.7994Z",stroke:"currentColor"})),ae=({slots:l,placeholderImage:T="",loading:$,product:e,itemType:j,taxConfig:q,translations:x,disabledIncrementer:W,onQuantity:v,showConfigurableOptions:E,routeProductDetails:P})=>{var _,D,f,L,V;const{taxExcluded:d,taxIncluded:k}=q,t=H((n,s,r)=>i(B,{amount:n,currency:s,weight:"normal",...r}),[]),N=H(n=>{var o,F;const s=(n==null?void 0:n.productName)??"",r={title:s,src:((F=(o=n==null?void 0:n.product)==null?void 0:o.thumbnail)==null?void 0:F.url)??T,alt:s,width:90,height:120,loading:"lazy"};return i(M,{slotTag:"span",contentTag:"span","data-testid":`cartSummaryItemImage-${n.id}`,name:"CartSummaryItemImage",slot:l==null?void 0:l.CartSummaryItemImage,context:{data:n,defaultImageProps:r},children:i(K,{...r})})},[T,l==null?void 0:l.CartSummaryItemImage]);if(!e)return i(J,{});let y={};const w=j==="cancelled",z=(D=(_=e==null?void 0:e.product)==null?void 0:_.stockStatus)==null?void 0:D.includes("IN_STOCK"),a=e==null?void 0:e.giftCard,A=e.totalQuantity>1?{quantity:e.totalQuantity}:{},I=e.discounted,{includeAndExcludeTax:c,includeTax:h,excludeTax:m}=e.taxCalculations,g=e==null?void 0:e.totalQuantity,O={...(e==null?void 0:e.configurableOptions)||{},...(e==null?void 0:e.bundleOptions)||{},...a!=null&&a.senderName?{[x.sender]:a==null?void 0:a.senderName}:{},...a!=null&&a.senderEmail?{[x.sender]:a==null?void 0:a.senderEmail}:{},...a!=null&&a.senderName?{[x.sender]:a==null?void 0:a.senderName}:{},...a!=null&&a.recipientEmail?{[x.recipient]:a==null?void 0:a.recipientEmail}:{},...a!=null&&a.message?{[x.message]:a==null?void 0:a.message}:{},...e!=null&&e.downloadableLinks?{[`${(f=e==null?void 0:e.downloadableLinks)==null?void 0:f.count} ${x.downloadableCount}`]:(L=e==null?void 0:e.downloadableLinks)==null?void 0:L.result}:{}};if(k&&d){const n=t(c.originalPrice.value,c.originalPrice.currency),s=t(c.baseOriginalPrice.value*g,c.baseOriginalPrice.currency,{variant:e.discounted?"strikethrough":"default",weight:"bold"}),r=t(c.baseDiscountedPrice.value*g,c.baseDiscountedPrice.currency,{sale:!0,weight:"bold"}),o=t(c.baseExcludingTax.value*g,c.baseExcludingTax.currency,{weight:"bold"});y={taxExcluded:!0,taxIncluded:void 0,price:n,total:b(u,{children:[s,e.discounted?r:null]}),totalExcludingTax:o}}else if(!k&&d){const n=t(m.originalPrice.value,m.originalPrice.currency),s=t(m.baseOriginalPrice.value*g,m.baseOriginalPrice.currency,{variant:I?"strikethrough":"default",weight:"bold"}),r=t(m.baseDiscountedPrice.value*g,m.baseDiscountedPrice.currency,{sale:!0,weight:"bold"}),o=t(m.baseExcludingTax.value*g,m.baseExcludingTax.currency,{weight:"bold"});y={taxExcluded:void 0,taxIncluded:void 0,price:n,total:b(u,{children:[s,I?r:null]}),totalExcludingTax:o}}else if(k&&!d){const n=t(h.singleItemPrice.value,h.singleItemPrice.currency),s=t(h.baseOriginalPrice.value*g,h.baseOriginalPrice.currency,{variant:I?"strikethrough":"default",weight:"bold"}),r=t(h.baseDiscountedPrice.value*g,h.baseDiscountedPrice.currency,{sale:!0,weight:"bold"});y={taxExcluded:void 0,taxIncluded:!0,price:n,total:b(u,{children:[s,I?r:null]})}}return i(Q,{loading:$,alert:w&&z?b("span",{children:[i(R,{source:U}),x.outOfStock]}):i(u,{}),configurations:(E==null?void 0:E(O))??O,title:P?i("a",{"data-testid":"product-name",className:Z(["cart-summary-item__title",["cart-summary-item__title--strikethrough",w]]),href:P(e),children:e==null?void 0:e.productName}):i("div",{"data-testid":"product-name",className:Z(["cart-summary-item__title",["cart-summary-item__title--strikethrough",w]]),children:e==null?void 0:e.productName}),sku:i("div",{children:(V=e==null?void 0:e.product)==null?void 0:V.sku}),...A,image:P?i("a",{href:P(e),children:N(e)}):N(e),...y,footer:b(u,{children:[v&&!W?i(G,{value:1,min:1,max:e==null?void 0:e.totalQuantity,onValue:n=>v==null?void 0:v(Number(n)),name:"quantity","data-testid":"returnIncrementer",readonly:!0}):void 0,i(M,{"data-testid":"Footer",name:"Footer",slot:l==null?void 0:l.Footer,context:{item:e}})]})})};export{ae as C,U as S};
